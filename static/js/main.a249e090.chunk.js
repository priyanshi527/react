(this.webpackJsonpwhatsapp=this.webpackJsonpwhatsapp||[]).push([[0],{70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},85:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var c=a(3),s=a(2),n=a.n(s),i=a(25),r=a.n(i),o=(a(70),a(12)),j=(a(71),a(106)),d=a(101),l=a(54),h=a.n(l),b=a(55),u=a.n(b),O=a(56),m=a.n(O),p=a(102),x=(a(72),a(29)),f=x.a.initializeApp({apiKey:"AIzaSyDd2_R5UWyIp0rzyC2R-6qg1G_ilKH-ems",authDomain:"whatsappclone-2351a.firebaseapp.com",databaseURL:"https://whatsappclone-2351a.firebaseio.com",projectId:"whatsappclone-2351a",storageBucket:"whatsappclone-2351a.appspot.com",messagingSenderId:"1055630799424",appId:"1:1055630799424:web:c6a4e3ea9d1af12462e5a5",measurementId:"G-W8WJX3G9BW"}).firestore(),v=x.a.auth(),g=new x.a.auth.GoogleAuthProvider,N=f,S=a(37);var w=function(e){var t,a=e.id,n=e.name,i=e.addNewChat,r=Object(s.useState)(""),d=Object(o.a)(r,2),l=d[0],h=d[1],b=Object(s.useState)(""),u=Object(o.a)(b,2),O=u[0],m=u[1];return Object(s.useEffect)((function(){a&&N.collection("rooms").doc(a).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return m(e.docs.map((function(e){return e.data()})))}))}),[a]),Object(s.useEffect)((function(){h(Math.floor(5e3*Math.random()))}),[]),i?Object(c.jsx)("div",{onClick:function(){var e=prompt("Please enter name for the chat");e&&N.collection("rooms").add({name:e})},className:"sidebarChat",children:Object(c.jsx)("h2",{children:"Add new Chat"})}):Object(c.jsx)(S.b,{to:"/rooms/".concat(a),children:Object(c.jsxs)("div",{className:"sidebarChat",children:[Object(c.jsx)(j.a,{src:"https://avatars.dicebear.com/api/human/".concat(l,".svg")}),Object(c.jsxs)("div",{className:"sidebarChatInfo",children:[Object(c.jsx)("h2",{children:n}),Object(c.jsx)("p",{children:null===(t=O[0])||void 0===t?void 0:t.message})]})]})})},C=(a(85),Object(s.createContext)()),y=function(e){var t=e.reducer,a=e.initialState,n=e.children;return Object(c.jsx)(C.Provider,{value:Object(s.useReducer)(t,a),children:n})},_=function(){return Object(s.useContext)(C)};var I=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),a=t[0],n=t[1],i=_(),r=Object(o.a)(i,2),l=r[0].user;return r[1],Object(s.useEffect)((function(){var e=N.collection("rooms").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsxs)("div",{className:"sidebar__header",children:[Object(c.jsx)(j.a,{src:null===l||void 0===l?void 0:l.photoURL}),Object(c.jsxs)("div",{className:"sidebar__headerRight",children:[Object(c.jsxs)(d.a,{children:["  ",Object(c.jsx)(h.a,{})," "]}),Object(c.jsxs)(d.a,{children:["  ",Object(c.jsx)(u.a,{})," "]}),Object(c.jsxs)(d.a,{children:["  ",Object(c.jsx)(m.a,{})," "]})]})]}),Object(c.jsx)("div",{className:"sidebar_search",children:Object(c.jsxs)("div",{className:"sidebar_searchContainer",children:[Object(c.jsx)(p.a,{}),Object(c.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]})}),Object(c.jsxs)("div",{className:"sidebar_chats",children:[Object(c.jsx)(w,{addNewChat:!0}),a.map((function(e){return Object(c.jsx)(w,{id:e.id,name:e.data.name},e.id)}))]})]})},k=a(103),D=a(104),E=a(57),R=a.n(E),T=a(58),W=a.n(T),A=a(9);a(87);var B=function(){var e,t,a=Object(s.useState)(""),n=Object(o.a)(a,2),i=n[0],r=n[1],l=Object(s.useState)(""),h=Object(o.a)(l,2),b=h[0],u=h[1],O=Object(A.f)().roomId,m=Object(s.useState)(""),f=Object(o.a)(m,2),v=f[0],g=f[1],S=Object(s.useState)([]),w=Object(o.a)(S,2),C=w[0],y=w[1],I=_(),E=Object(o.a)(I,2),T=E[0].user;return E[1],Object(s.useEffect)((function(){O&&(N.collection("rooms").doc(O).onSnapshot((function(e){return g(e.data().name)})),N.collection("rooms").doc(O).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return y(e.docs.map((function(e){return e.data()})))})))}),[O]),Object(s.useEffect)((function(){r(Math.floor(5e3*Math.random()))}),[O]),Object(c.jsxs)("div",{className:"chat",children:[Object(c.jsxs)("div",{className:"chatheader",children:[Object(c.jsx)(j.a,{src:"https://avatars.dicebear.com/api/human/".concat(i,".svg")}),Object(c.jsxs)("div",{className:"chatheaderinfo",children:[Object(c.jsx)("h3",{children:v}),Object(c.jsxs)("p",{children:["Last seen"," "," ",new Date(null===(e=C[C.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(c.jsxs)("div",{className:"classheaderRight",children:[Object(c.jsx)(d.a,{children:Object(c.jsx)(p.a,{})}),Object(c.jsx)(d.a,{children:Object(c.jsx)(k.a,{})}),Object(c.jsx)(d.a,{children:Object(c.jsx)(D.a,{})})]})]}),Object(c.jsx)("div",{className:"chatbody",children:C.map((function(e){var t;return Object(c.jsxs)("p",{className:"chatmessage ".concat(e.name===T.displayName&&"chatreceiver"),children:[Object(c.jsx)("span",{className:"chatname",children:e.name}),e.message,Object(c.jsx)("span",{className:"chattimestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})}))}),Object(c.jsxs)("div",{className:"chatfooter",children:[Object(c.jsx)(R.a,{}),Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{value:b,onChange:function(e){return u(e.target.value)},placeholder:"Type a message",type:"text"}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),N.collection("rooms").doc(O).collection("messages").add({message:b,name:T.displayName,timestamp:x.a.firestore.FieldValue.serverTimestamp()}),u("")},type:"submit",children:"Send a Message"})]}),Object(c.jsx)(W.a,{})]})]})},F=a(59),M=a(105),P=(a(88),a(46)),U="SET_USER",G=function(e,t){switch(console.log(t),t.type){case U:return Object(P.a)(Object(P.a)({},e),{},{user:t.user});default:return e}};var L=function(){var e=_(),t=Object(o.a)(e,2);Object(F.a)(t[0]);var a=t[1];return Object(c.jsx)("div",{className:"login",children:Object(c.jsxs)("div",{className:"login__container",children:[Object(c.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:""}),Object(c.jsx)("div",{className:"login__text",children:Object(c.jsx)("h1",{children:"Sign in to WhatsApp"})}),Object(c.jsx)(M.a,{onClick:function(){v.signInWithPopup(g).then((function(e){a({type:U,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign in with Google"})]})})};var z=function(){var e=_(),t=Object(o.a)(e,2),a=t[0].user;return t[1],Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"app",children:a?Object(c.jsx)("div",{className:"app_body",children:Object(c.jsxs)(S.a,{children:[Object(c.jsx)(I,{}),Object(c.jsxs)(A.c,{children:[Object(c.jsx)(A.a,{path:"/rooms/:roomId",children:Object(c.jsx)(B,{})}),Object(c.jsx)(A.a,{path:"/",children:Object(c.jsx)(B,{})})]})]})}):Object(c.jsx)(L,{})})})},J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,107)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),c(e),s(e),n(e),i(e)}))};r.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(y,{initialState:{user:null},reducer:G,children:Object(c.jsx)(z,{})})}),document.getElementById("root")),J()}},[[89,1,2]]]);
//# sourceMappingURL=main.a249e090.chunk.js.map